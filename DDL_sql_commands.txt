CREATE TABLE devices (
id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
bloc_id INTEGER NOT NULL,
machine_name TEXT(3) NOT NULL,
machine_id INTEGER NOT NULL,
param_name TEXT(3),
param_id INTEGER NOT NULL,
number INTEGER NOT NULL,
socket_file TEXT(256),
crytiсal_high INTEGER DEFAULT NULL,
high INTEGER DEFAULT NULL,
low INTEGER DEFAULT NULL,
crytiсal_low INTEGER DEFAULT NULL,
number_of_measurements INTEGER DEFAULT 604800,
FOREIGN KEY (bloc_id) REFERENCES blocs(id) ON UPDATE NO ACTION ON DELETE NO ACTION,
FOREIGN KEY (param_id) REFERENCES params(id) ON UPDATE NO ACTION ON DELETE NO ACTION
FOREIGN KEY (machine_name) REFERENCES machines(abb) ON UPDATE NO ACTION ON DELETE NO ACTION
FOREIGN KEY (machine_id) REFERENCES machines(id_in_block) ON UPDATE NO ACTION ON DELETE NO ACTION
);

CREATE TABLE machines (
id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
abb TEXT(3),
id_in_block INTEGER NOT NULL,
description TEXT(256)

);

CREATE TABLE params (
id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
param TEXT(20) NOT NULL,
unit_val_name TEXT(20) NOT NULL);



CREATE TABLE blocs(
id INTEGER NOT NULL PRIMARY KEY AUTOINCREMENT,
min_description TEXT(25) NOT NULL,
full_description TEXT(256) NOT NULL);

CREATE TABLE history_params(
device_id INTEGER NOT NULL,
value INTEGER DEFAULT NULL,
FOREIGN KEY (device_id) REFERENCES devices(id) ON UPDATE NO ACTION ON DELETE NO ACTION);
